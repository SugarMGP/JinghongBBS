{"openapi":"3.0.1","info":{"title":"2024暑期招新大作业","description":"","version":"1.0.0"},"tags":[],"paths":{"/api/user/login":{"post":{"summary":"登录","deprecated":false,"description":"用户登录接口，根据账号不同，登录响应结果区分管理员和学生登录\n前端要求登录成功后能跳转到不同的界面\n后端要求可以返回不同的type码来区分","tags":[],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","title":"用户名","description":"使用的是学号"},"password":{"type":"string","title":"密码"}},"required":["username","password"]},"example":{"username":"123","password":"12345678"}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"object","properties":{"user_id":{"type":"integer","title":"用户编号"},"user_type":{"type":"integer","title":"用户类型","description":"1代表学生，2代表管理员"}},"required":["user_id","user_type"],"nullable":true}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":{"user_id":2,"user_type":1},"msg":"success"}},"2":{"summary":"异常示例","value":{"code":200506,"data":null,"msg":"用户不存在"}},"3":{"summary":"异常示例","value":{"code":200507,"data":null,"msg":"密码错误"}}}}}}},"security":[]}},"/api/student/post":{"post":{"summary":"发布帖子","deprecated":false,"description":"学生发帖接口\n前端要求发帖成功后清空输入框，失败要有用户友好提醒\n后端要求发帖时记录当前时间","tags":[],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"content":{"type":"string","title":"帖子内容"},"user_id":{"type":"integer","title":"学生编号"}},"required":["content","user_id"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"null"}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":null,"msg":"success"}}}}}}},"security":[]},"get":{"summary":"获取所有发布的帖子","deprecated":false,"description":"学生获取所有发布的帖子\n前端要求展示出已经发出的帖子\n后端要求返回帖子列表","tags":[],"parameters":[],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"object","properties":{"post_list":{"type":"array","items":{"type":"object","properties":{"user_id":{"type":"integer","title":"用户编号"},"content":{"type":"string","title":"帖子内容"},"time":{"type":"string","title":"创建时间"}},"required":["user_id","time","content"]}}},"required":["post_list"]}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":{"post_list":[{"id":1,"content":"123","user_id":2,"time":"2024-07-19T05:13:34.779+08:00"},{"id":2,"content":"1233","user_id":3,"time":"2024-07-19T05:13:50.038+08:00"}]},"msg":"success"}}}}}}},"security":[]},"delete":{"summary":"删除帖子","deprecated":false,"description":"学生删除自己发布的帖子","tags":[],"parameters":[{"name":"user_id","in":"query","description":"用户编号","required":true,"schema":{"type":"integer"}},{"name":"post_id","in":"query","description":"帖子编号","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"null"}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":null,"msg":"success"}}}}}}},"security":[]},"put":{"summary":"修改帖子","deprecated":false,"description":"学生修改自己发布的帖子","tags":[],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","title":"用户编号"},"post_id":{"type":"integer","title":"帖子编号"},"content":{"type":"string","title":"帖子内容"}},"required":["user_id","content","post_id"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"null"}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":null,"msg":"success"}}}}}}},"security":[]}},"/api/admin/report":{"get":{"summary":"获取所有未审批的被举报帖子","deprecated":false,"description":"管理员可以获取所有学生发来未审批的举报帖子列表","tags":[],"parameters":[{"name":"user_id","in":"query","description":"用户编号","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"object","properties":{"report_list":{"type":"array","items":{"type":"object","properties":{"username":{"type":"string","description":"用户名（学号）"},"post_id":{"type":"integer","description":"帖子编号"},"content":{"type":"string","description":"帖子内容"},"reason":{"type":"string","description":"举报原因"}},"required":["username","content","reason","post_id"]},"description":"举报帖子列表"}},"required":["report_list"]}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":{"report_list":[{"username":"110","content":"会长好帅","reason":"尊嘟假嘟","post_id":1}]},"msg":"success"}}}}}}},"security":[]},"post":{"summary":"审核被举报的帖子","deprecated":false,"description":"管理员审批被举报的帖子，审批通过会删除被举报帖子","tags":[],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","title":"用户编号"},"post_id":{"type":"integer","title":"帖子编号"},"approval":{"type":"integer","description":"1代表同意，2代表拒绝","title":"状态"}},"required":["user_id","approval","post_id"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"null"}},"required":["code","data","msg"]}}}}},"security":[]}},"/api/user/reg":{"post":{"summary":"注册","deprecated":false,"description":"生成学生和管理员账户\n前端不需要实现这个接口\n后端要求实现","tags":[],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","title":"账号","description":"输入学号或管理工号，只由数字组成"},"name":{"type":"string","title":"姓名"},"password":{"type":"string","title":"密码","description":"要求长度大于8位，小于16位"},"user_type":{"type":"integer","title":"用户类型","description":"1代表学生，2代表管理员"}},"required":["username","password","name","user_type"]},"example":{"username":"123","name":"ximo","password":"12345678","user_type":2}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"null"}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":null,"msg":"success"}},"2":{"summary":"异常示例","value":{"code":200502,"data":null,"msg":"用户名必须为纯数字"}},"3":{"summary":"异常示例","value":{"code":200503,"data":null,"msg":"密码长度必须在8-16位"}},"4":{"summary":"异常示例","value":{"code":200504,"data":null,"msg":"用户类型错误"}},"5":{"summary":"异常示例","value":{"code":200505,"data":null,"msg":"用户名已存在"}}}}}}},"security":[]}},"/api/student/report-post":{"post":{"summary":"举报帖子","deprecated":false,"description":"学生举报违禁帖子","tags":[],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","title":"用户编号"},"post_id":{"type":"integer","title":"帖子编号"},"reason":{"type":"string","title":"举报原因"}},"required":["user_id","reason","post_id"]}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"null"}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":null,"msg":"success"}}}}}}},"security":[]},"get":{"summary":"查看举报审批","deprecated":false,"description":"学生可以查看举报给管理员的帖子的审核结果","tags":[],"parameters":[{"name":"user_id","in":"query","description":"","required":false,"schema":{"type":"integer"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer"},"msg":{"type":"string"},"data":{"type":"object","properties":{"report_list":{"type":"array","items":{"type":"object","properties":{"post_id":{"type":"integer","title":"帖子编号"},"content":{"type":"string","title":"帖子内容"},"reason":{"type":"string","title":"举报原因"},"status":{"type":"integer","title":"审批状态","description":"0代表未审批1代表已通过2代表不通过"}},"required":["post_id","status","content","reason"]}}},"required":["report_list"]}},"required":["code","data","msg"]},"examples":{"1":{"summary":"成功示例","value":{"code":200,"data":{"report_list":[{"post_id":2,"content":"1233","reason":"123","status":0}]},"msg":"success"}}}}}}},"security":[]}}},"components":{"schemas":{},"securitySchemes":{}},"servers":[]}